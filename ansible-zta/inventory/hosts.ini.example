# Zero Trust Architecture - Ansible Inventory Template
# Updated for Zero Trust: ONLY Auth Portal has public IP
# All other VMs accessed via ProxyCommand through Auth Portal

[all:vars]
ansible_user=ubuntu
ansible_ssh_private_key_file=~/.ssh/id_rsa_zerotrust
ansible_python_interpreter=/usr/bin/python3
ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes'

# IP Addresses - ONLY Auth Portal has public IP
auth_portal_public_ip=172.10.10.170
monitoring_internal_ip=10.40.1.10
identity_internal_ip=10.40.1.20

[auth_portal]
vm-auth-portal ansible_host=172.10.10.170

[monitoring]
# Access via SSH ProxyCommand through Auth Portal
vm-monitoring ansible_host=10.40.1.10 ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ProxyCommand="ssh -W %h:%p -i ~/.ssh/id_rsa_zerotrust ubuntu@172.10.10.170"'

[identity]
# Access via SSH ProxyCommand through Auth Portal
vm-identity ansible_host=10.40.1.20 ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ProxyCommand="ssh -W %h:%p -i ~/.ssh/id_rsa_zerotrust ubuntu@172.10.10.170"'

[aws_gateway]
vm-aws-gateway ansible_host=10.20.2.5 ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ProxyCommand="ssh -W %h:%p -i ~/.ssh/id_rsa_zerotrust ubuntu@172.10.10.170"'

[os_gateway]
vm-os-gateway ansible_host=10.10.2.5 ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ProxyCommand="ssh -W %h:%p -i ~/.ssh/id_rsa_zerotrust ubuntu@172.10.10.170"'

[k3s_masters]
aws-master ansible_host=10.20.2.10 ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ProxyCommand="ssh -W %h:%p -i ~/.ssh/id_rsa_zerotrust ubuntu@172.10.10.170"'
os-master ansible_host=10.10.2.10 ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ProxyCommand="ssh -W %h:%p -i ~/.ssh/id_rsa_zerotrust ubuntu@172.10.10.170"'
